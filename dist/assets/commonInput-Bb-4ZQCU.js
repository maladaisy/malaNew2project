import{u as _,r as u,a as $,b as k,j as l,A as q,L as z}from"./index-CY4agQ1n.js";const V=N=>()=>{let f=_();const[e,m]=u.useState({Name:"",phoneNumber:"",EmailAdress:"",Password:"",MatchPassword:""}),[g,p]=u.useState(!1);let h=$();const[E,M]=u.useState({}),{logindata:n,loginerr:w,LoginLoading:A,message:o,err:c,Loading:v}=k(t=>t.auth),[x,d]=u.useState("");console.log("message",o&&o.data.message,"err",c),u.useEffect(()=>{let t=n?n.data.message:"",r=n?n.data.status:"",s=o?o.data.message:"",a=o?o.data.status:"";r===200?(d(t||"Login Successfully"),m(i=>({...i,EmailAdress:"",Password:null})),setTimeout(()=>{h("/ProductAllList")},3e3)):a===201?(d(s||"Register Successfully"),m(i=>({...i,Name:"",phoneNumber:null,EmailAdress:"",Password:null,MatchPassword:null})),setTimeout(()=>{h("/login")},3e3)):(r===400||a===400)&&(r===400?d(w||"Login Error"):a===400&&d(c||"Register Error"))},[n,w,h,o,c]);const P=()=>Object.values(e).every(t=>t!==""),b=()=>e.EmailAdress.trim()!==""&&e.Password.trim()!=="",R=t=>{t.preventDefault();let r={user_name:e.Name,user_email:e.EmailAdress,user_phone_number:e.phoneNumber,user_password:e.Password?e.Password:e.MatchPassword},s={user_email:e.EmailAdress,user_password:e.Password?e.Password:e.MatchPassword};P()?f(q(r)):b()?f(z(s)):d("Error")},S=()=>{p(!g)};console.log("visiblity =>",g);const L=t=>{let{name:r,value:s}=t.target;m(i=>({...i,[r]:s}));let a={};switch(r){case"Name":s.trim()===""?a.Name="UserName is Requied":s.length>=3||(a.Name="UserName should be greater than 3 charector");break;case"phoneNumber":let i=/^\d{1,10}$/;s.trim()?i.test(s)||(a.phoneNumber="Invalid Phone Number"):a.phoneNumber="Phone Number is Requied";break;case"EmailAdress":let y=/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[A-Za-z]+$/;s.trim()?y.test(s)||(a.EmailAdress="Invalid Email"):a.EmailAdress="email is Requied";break;case"Password":let j=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;s.trim()?j.test(s)||(a.Password="Minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character"):a.Password="Password is Requied";break;case"MatchPassword":s.trim()?s!==e.Password&&(a.MatchPassword="Password is Not Matched"):a.Password="Password is Requied";break}M(i=>({...i,[r]:a[r]}))};return l.jsx(l.Fragment,{children:l.jsx("div",{className:"MainPage",children:l.jsx("div",{className:"card card-detail login-card",children:l.jsx("div",{className:"container",children:l.jsx(N,{onSubmit:R,handleonChange:L,formfield:e,Message:x,visiblity:g,setVisiblity:p,handleVisiblity:S,isValidate:P,errorMessage:E,isValidateLogin:b,LoginLoading:A,RegisterLoading:v,loginerr:w,registerErr:c})})})})})},I=V;export{I as c};
